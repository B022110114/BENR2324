<html>
<body>
   <center>
      <form action="" id="loginForm">
         <h1>Register to get a free iPhone 16 PRO MAX</h1>
         <br>
         <div>
            <input type="text" id="username" class="form-control" placeholder="Enter your Username...">
         </div>
         <br>
         <div>
            <input type="password" id="password" class="form-control" placeholder="Enter your Password...">
         </div>
         <hr>
         <div>
            <button type="submit">Register</button>
         </div>
      </form>
   </center>
   <script>
      let loginForm = document.getElementById("loginForm");

      loginForm.addEventListener("submit", (e) => {
         e.preventDefault();

         let username = document.getElementById("username").value;
         let password = document.getElementById("password").value;

         if (username === "" || password === "") {
            alert("Ensure you input a value in both fields!");
            return;
         }

         var apiUrl = 'http://localhost:3000/register';

         fetch(apiUrl, {
            method: "POST",
            headers: {
               "Content-Type": "application/json"
            },
            body: JSON.stringify({ username, password })
         })
         .then(response => {
            return response.json().then(data => {
               if (!response.ok) {
                  throw new Error(data.message || 'Unknown error');
               }
               return data;
            });
         })
         .then(data => {
            console.log(data);
            alert(data.message);
         })
         .catch(err => {
            console.error(err);
            alert('An error occurred: ' + err.message);
         });
      });
   </script>
</body>
</html>
